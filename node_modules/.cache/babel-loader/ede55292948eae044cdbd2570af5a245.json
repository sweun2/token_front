{"ast":null,"code":"import { assertNotStrictEqual } from './typings/common-types.js';\nimport { isPromise } from './utils/is-promise.js';\nimport { applyMiddleware, commandMiddlewareFactory } from './middleware.js';\nimport { parseCommand } from './parse-command.js';\nimport { isYargsInstance } from './yargs-factory.js';\nimport whichModule from './utils/which-module.js';\nconst DEFAULT_MARKER = /(^\\*)|(^\\$0)/;\nexport function command(yargs, usage, validation) {\n  let globalMiddleware = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  let shim = arguments.length > 4 ? arguments[4] : undefined;\n  const self = {};\n  let handlers = {};\n  let aliasMap = {};\n  let defaultCommand;\n\n  self.addHandler = function addHandler(cmd, description, builder, handler, commandMiddleware, deprecated) {\n    let aliases = [];\n    const middlewares = commandMiddlewareFactory(commandMiddleware);\n\n    handler = handler || (() => {});\n\n    if (Array.isArray(cmd)) {\n      if (isCommandAndAliases(cmd)) {\n        [cmd, ...aliases] = cmd;\n      } else {\n        for (const command of cmd) {\n          self.addHandler(command);\n        }\n      }\n    } else if (isCommandHandlerDefinition(cmd)) {\n      let command = Array.isArray(cmd.command) || typeof cmd.command === 'string' ? cmd.command : moduleName(cmd);\n      if (cmd.aliases) command = [].concat(command).concat(cmd.aliases);\n      self.addHandler(command, extractDesc(cmd), cmd.builder, cmd.handler, cmd.middlewares, cmd.deprecated);\n      return;\n    } else if (isCommandBuilderDefinition(builder)) {\n      self.addHandler([cmd].concat(aliases), description, builder.builder, builder.handler, builder.middlewares, builder.deprecated);\n      return;\n    }\n\n    if (typeof cmd === 'string') {\n      const parsedCommand = parseCommand(cmd);\n      aliases = aliases.map(alias => parseCommand(alias).cmd);\n      let isDefault = false;\n      const parsedAliases = [parsedCommand.cmd].concat(aliases).filter(c => {\n        if (DEFAULT_MARKER.test(c)) {\n          isDefault = true;\n          return false;\n        }\n\n        return true;\n      });\n      if (parsedAliases.length === 0 && isDefault) parsedAliases.push('$0');\n\n      if (isDefault) {\n        parsedCommand.cmd = parsedAliases[0];\n        aliases = parsedAliases.slice(1);\n        cmd = cmd.replace(DEFAULT_MARKER, parsedCommand.cmd);\n      }\n\n      aliases.forEach(alias => {\n        aliasMap[alias] = parsedCommand.cmd;\n      });\n\n      if (description !== false) {\n        usage.command(cmd, description, isDefault, aliases, deprecated);\n      }\n\n      handlers[parsedCommand.cmd] = {\n        original: cmd,\n        description,\n        handler,\n        builder: builder || {},\n        middlewares,\n        deprecated,\n        demanded: parsedCommand.demanded,\n        optional: parsedCommand.optional\n      };\n      if (isDefault) defaultCommand = handlers[parsedCommand.cmd];\n    }\n  };\n\n  self.addDirectory = function addDirectory(dir, context, req, callerFile, opts) {\n    opts = opts || {};\n    if (typeof opts.recurse !== 'boolean') opts.recurse = false;\n    if (!Array.isArray(opts.extensions)) opts.extensions = ['js'];\n    const parentVisit = typeof opts.visit === 'function' ? opts.visit : o => o;\n\n    opts.visit = function visit(obj, joined, filename) {\n      const visited = parentVisit(obj, joined, filename);\n\n      if (visited) {\n        if (~context.files.indexOf(joined)) return visited;\n        context.files.push(joined);\n        self.addHandler(visited);\n      }\n\n      return visited;\n    };\n\n    shim.requireDirectory({\n      require: req,\n      filename: callerFile\n    }, dir, opts);\n  };\n\n  function moduleName(obj) {\n    const mod = whichModule(obj);\n    if (!mod) throw new Error(`No command name given for module: ${shim.inspect(obj)}`);\n    return commandFromFilename(mod.filename);\n  }\n\n  function commandFromFilename(filename) {\n    return shim.path.basename(filename, shim.path.extname(filename));\n  }\n\n  function extractDesc(_ref) {\n    let {\n      describe,\n      description,\n      desc\n    } = _ref;\n\n    for (const test of [describe, description, desc]) {\n      if (typeof test === 'string' || test === false) return test;\n      assertNotStrictEqual(test, true, shim);\n    }\n\n    return false;\n  }\n\n  self.getCommands = () => Object.keys(handlers).concat(Object.keys(aliasMap));\n\n  self.getCommandHandlers = () => handlers;\n\n  self.hasDefaultCommand = () => !!defaultCommand;\n\n  self.runCommand = function runCommand(command, yargs, parsed, commandIndex) {\n    let aliases = parsed.aliases;\n    const commandHandler = handlers[command] || handlers[aliasMap[command]] || defaultCommand;\n    const currentContext = yargs.getContext();\n    let numFiles = currentContext.files.length;\n    const parentCommands = currentContext.commands.slice();\n    let innerArgv = parsed.argv;\n    let positionalMap = {};\n\n    if (command) {\n      currentContext.commands.push(command);\n      currentContext.fullCommands.push(commandHandler.original);\n    }\n\n    const builder = commandHandler.builder;\n\n    if (isCommandBuilderCallback(builder)) {\n      const builderOutput = builder(yargs.reset(parsed.aliases));\n      const innerYargs = isYargsInstance(builderOutput) ? builderOutput : yargs;\n\n      if (shouldUpdateUsage(innerYargs)) {\n        innerYargs.getUsageInstance().usage(usageFromParentCommandsCommandHandler(parentCommands, commandHandler), commandHandler.description);\n      }\n\n      innerArgv = innerYargs._parseArgs(null, null, true, commandIndex);\n      aliases = innerYargs.parsed.aliases;\n    } else if (isCommandBuilderOptionDefinitions(builder)) {\n      const innerYargs = yargs.reset(parsed.aliases);\n\n      if (shouldUpdateUsage(innerYargs)) {\n        innerYargs.getUsageInstance().usage(usageFromParentCommandsCommandHandler(parentCommands, commandHandler), commandHandler.description);\n      }\n\n      Object.keys(commandHandler.builder).forEach(key => {\n        innerYargs.option(key, builder[key]);\n      });\n      innerArgv = innerYargs._parseArgs(null, null, true, commandIndex);\n      aliases = innerYargs.parsed.aliases;\n    }\n\n    if (!yargs._hasOutput()) {\n      positionalMap = populatePositionals(commandHandler, innerArgv, currentContext);\n    }\n\n    const middlewares = globalMiddleware.slice(0).concat(commandHandler.middlewares);\n    applyMiddleware(innerArgv, yargs, middlewares, true);\n\n    if (!yargs._hasOutput()) {\n      yargs._runValidation(innerArgv, aliases, positionalMap, yargs.parsed.error, !command);\n    }\n\n    if (commandHandler.handler && !yargs._hasOutput()) {\n      yargs._setHasOutput();\n\n      const populateDoubleDash = !!yargs.getOptions().configuration['populate--'];\n\n      yargs._postProcess(innerArgv, populateDoubleDash);\n\n      innerArgv = applyMiddleware(innerArgv, yargs, middlewares, false);\n      let handlerResult;\n\n      if (isPromise(innerArgv)) {\n        handlerResult = innerArgv.then(argv => commandHandler.handler(argv));\n      } else {\n        handlerResult = commandHandler.handler(innerArgv);\n      }\n\n      const handlerFinishCommand = yargs.getHandlerFinishCommand();\n\n      if (isPromise(handlerResult)) {\n        yargs.getUsageInstance().cacheHelpMessage();\n        handlerResult.then(value => {\n          if (handlerFinishCommand) {\n            handlerFinishCommand(value);\n          }\n        }).catch(error => {\n          try {\n            yargs.getUsageInstance().fail(null, error);\n          } catch (err) {}\n        }).then(() => {\n          yargs.getUsageInstance().clearCachedHelpMessage();\n        });\n      } else {\n        if (handlerFinishCommand) {\n          handlerFinishCommand(handlerResult);\n        }\n      }\n    }\n\n    if (command) {\n      currentContext.commands.pop();\n      currentContext.fullCommands.pop();\n    }\n\n    numFiles = currentContext.files.length - numFiles;\n    if (numFiles > 0) currentContext.files.splice(numFiles * -1, numFiles);\n    return innerArgv;\n  };\n\n  function shouldUpdateUsage(yargs) {\n    return !yargs.getUsageInstance().getUsageDisabled() && yargs.getUsageInstance().getUsage().length === 0;\n  }\n\n  function usageFromParentCommandsCommandHandler(parentCommands, commandHandler) {\n    const c = DEFAULT_MARKER.test(commandHandler.original) ? commandHandler.original.replace(DEFAULT_MARKER, '').trim() : commandHandler.original;\n    const pc = parentCommands.filter(c => {\n      return !DEFAULT_MARKER.test(c);\n    });\n    pc.push(c);\n    return `$0 ${pc.join(' ')}`;\n  }\n\n  self.runDefaultBuilderOn = function (yargs) {\n    assertNotStrictEqual(defaultCommand, undefined, shim);\n\n    if (shouldUpdateUsage(yargs)) {\n      const commandString = DEFAULT_MARKER.test(defaultCommand.original) ? defaultCommand.original : defaultCommand.original.replace(/^[^[\\]<>]*/, '$0 ');\n      yargs.getUsageInstance().usage(commandString, defaultCommand.description);\n    }\n\n    const builder = defaultCommand.builder;\n\n    if (isCommandBuilderCallback(builder)) {\n      builder(yargs);\n    } else if (!isCommandBuilderDefinition(builder)) {\n      Object.keys(builder).forEach(key => {\n        yargs.option(key, builder[key]);\n      });\n    }\n  };\n\n  function populatePositionals(commandHandler, argv, context) {\n    argv._ = argv._.slice(context.commands.length);\n    const demanded = commandHandler.demanded.slice(0);\n    const optional = commandHandler.optional.slice(0);\n    const positionalMap = {};\n    validation.positionalCount(demanded.length, argv._.length);\n\n    while (demanded.length) {\n      const demand = demanded.shift();\n      populatePositional(demand, argv, positionalMap);\n    }\n\n    while (optional.length) {\n      const maybe = optional.shift();\n      populatePositional(maybe, argv, positionalMap);\n    }\n\n    argv._ = context.commands.concat(argv._.map(a => '' + a));\n    postProcessPositionals(argv, positionalMap, self.cmdToParseOptions(commandHandler.original));\n    return positionalMap;\n  }\n\n  function populatePositional(positional, argv, positionalMap) {\n    const cmd = positional.cmd[0];\n\n    if (positional.variadic) {\n      positionalMap[cmd] = argv._.splice(0).map(String);\n    } else {\n      if (argv._.length) positionalMap[cmd] = [String(argv._.shift())];\n    }\n  }\n\n  function postProcessPositionals(argv, positionalMap, parseOptions) {\n    const options = Object.assign({}, yargs.getOptions());\n    options.default = Object.assign(parseOptions.default, options.default);\n\n    for (const key of Object.keys(parseOptions.alias)) {\n      options.alias[key] = (options.alias[key] || []).concat(parseOptions.alias[key]);\n    }\n\n    options.array = options.array.concat(parseOptions.array);\n    options.config = {};\n    const unparsed = [];\n    Object.keys(positionalMap).forEach(key => {\n      positionalMap[key].map(value => {\n        if (options.configuration['unknown-options-as-args']) options.key[key] = true;\n        unparsed.push(`--${key}`);\n        unparsed.push(value);\n      });\n    });\n    if (!unparsed.length) return;\n    const config = Object.assign({}, options.configuration, {\n      'populate--': true\n    });\n    const parsed = shim.Parser.detailed(unparsed, Object.assign({}, options, {\n      configuration: config\n    }));\n\n    if (parsed.error) {\n      yargs.getUsageInstance().fail(parsed.error.message, parsed.error);\n    } else {\n      const positionalKeys = Object.keys(positionalMap);\n      Object.keys(positionalMap).forEach(key => {\n        positionalKeys.push(...parsed.aliases[key]);\n      });\n      Object.keys(parsed.argv).forEach(key => {\n        if (positionalKeys.indexOf(key) !== -1) {\n          if (!positionalMap[key]) positionalMap[key] = parsed.argv[key];\n          argv[key] = parsed.argv[key];\n        }\n      });\n    }\n  }\n\n  self.cmdToParseOptions = function (cmdString) {\n    const parseOptions = {\n      array: [],\n      default: {},\n      alias: {},\n      demand: {}\n    };\n    const parsed = parseCommand(cmdString);\n    parsed.demanded.forEach(d => {\n      const [cmd, ...aliases] = d.cmd;\n\n      if (d.variadic) {\n        parseOptions.array.push(cmd);\n        parseOptions.default[cmd] = [];\n      }\n\n      parseOptions.alias[cmd] = aliases;\n      parseOptions.demand[cmd] = true;\n    });\n    parsed.optional.forEach(o => {\n      const [cmd, ...aliases] = o.cmd;\n\n      if (o.variadic) {\n        parseOptions.array.push(cmd);\n        parseOptions.default[cmd] = [];\n      }\n\n      parseOptions.alias[cmd] = aliases;\n    });\n    return parseOptions;\n  };\n\n  self.reset = () => {\n    handlers = {};\n    aliasMap = {};\n    defaultCommand = undefined;\n    return self;\n  };\n\n  const frozens = [];\n\n  self.freeze = () => {\n    frozens.push({\n      handlers,\n      aliasMap,\n      defaultCommand\n    });\n  };\n\n  self.unfreeze = () => {\n    const frozen = frozens.pop();\n    assertNotStrictEqual(frozen, undefined, shim);\n    ({\n      handlers,\n      aliasMap,\n      defaultCommand\n    } = frozen);\n  };\n\n  return self;\n}\nexport function isCommandBuilderDefinition(builder) {\n  return typeof builder === 'object' && !!builder.builder && typeof builder.handler === 'function';\n}\n\nfunction isCommandAndAliases(cmd) {\n  if (cmd.every(c => typeof c === 'string')) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function isCommandBuilderCallback(builder) {\n  return typeof builder === 'function';\n}\n\nfunction isCommandBuilderOptionDefinitions(builder) {\n  return typeof builder === 'object';\n}\n\nexport function isCommandHandlerDefinition(cmd) {\n  return typeof cmd === 'object' && !Array.isArray(cmd);\n}","map":{"version":3,"names":["assertNotStrictEqual","isPromise","applyMiddleware","commandMiddlewareFactory","parseCommand","isYargsInstance","whichModule","DEFAULT_MARKER","command","yargs","usage","validation","globalMiddleware","shim","self","handlers","aliasMap","defaultCommand","addHandler","cmd","description","builder","handler","commandMiddleware","deprecated","aliases","middlewares","Array","isArray","isCommandAndAliases","isCommandHandlerDefinition","moduleName","concat","extractDesc","isCommandBuilderDefinition","parsedCommand","map","alias","isDefault","parsedAliases","filter","c","test","length","push","slice","replace","forEach","original","demanded","optional","addDirectory","dir","context","req","callerFile","opts","recurse","extensions","parentVisit","visit","o","obj","joined","filename","visited","files","indexOf","requireDirectory","require","mod","Error","inspect","commandFromFilename","path","basename","extname","describe","desc","getCommands","Object","keys","getCommandHandlers","hasDefaultCommand","runCommand","parsed","commandIndex","commandHandler","currentContext","getContext","numFiles","parentCommands","commands","innerArgv","argv","positionalMap","fullCommands","isCommandBuilderCallback","builderOutput","reset","innerYargs","shouldUpdateUsage","getUsageInstance","usageFromParentCommandsCommandHandler","_parseArgs","isCommandBuilderOptionDefinitions","key","option","_hasOutput","populatePositionals","_runValidation","error","_setHasOutput","populateDoubleDash","getOptions","configuration","_postProcess","handlerResult","then","handlerFinishCommand","getHandlerFinishCommand","cacheHelpMessage","value","catch","fail","err","clearCachedHelpMessage","pop","splice","getUsageDisabled","getUsage","trim","pc","join","runDefaultBuilderOn","undefined","commandString","_","positionalCount","demand","shift","populatePositional","maybe","a","postProcessPositionals","cmdToParseOptions","positional","variadic","String","parseOptions","options","assign","default","array","config","unparsed","Parser","detailed","message","positionalKeys","cmdString","d","frozens","freeze","unfreeze","frozen","every"],"sources":["/home/sweun2/Desktop/test/sol/front/node_modules/yargs/build/lib/command.js"],"sourcesContent":["import { assertNotStrictEqual, } from './typings/common-types.js';\nimport { isPromise } from './utils/is-promise.js';\nimport { applyMiddleware, commandMiddlewareFactory, } from './middleware.js';\nimport { parseCommand } from './parse-command.js';\nimport { isYargsInstance, } from './yargs-factory.js';\nimport whichModule from './utils/which-module.js';\nconst DEFAULT_MARKER = /(^\\*)|(^\\$0)/;\nexport function command(yargs, usage, validation, globalMiddleware = [], shim) {\n    const self = {};\n    let handlers = {};\n    let aliasMap = {};\n    let defaultCommand;\n    self.addHandler = function addHandler(cmd, description, builder, handler, commandMiddleware, deprecated) {\n        let aliases = [];\n        const middlewares = commandMiddlewareFactory(commandMiddleware);\n        handler = handler || (() => { });\n        if (Array.isArray(cmd)) {\n            if (isCommandAndAliases(cmd)) {\n                [cmd, ...aliases] = cmd;\n            }\n            else {\n                for (const command of cmd) {\n                    self.addHandler(command);\n                }\n            }\n        }\n        else if (isCommandHandlerDefinition(cmd)) {\n            let command = Array.isArray(cmd.command) || typeof cmd.command === 'string'\n                ? cmd.command\n                : moduleName(cmd);\n            if (cmd.aliases)\n                command = [].concat(command).concat(cmd.aliases);\n            self.addHandler(command, extractDesc(cmd), cmd.builder, cmd.handler, cmd.middlewares, cmd.deprecated);\n            return;\n        }\n        else if (isCommandBuilderDefinition(builder)) {\n            self.addHandler([cmd].concat(aliases), description, builder.builder, builder.handler, builder.middlewares, builder.deprecated);\n            return;\n        }\n        if (typeof cmd === 'string') {\n            const parsedCommand = parseCommand(cmd);\n            aliases = aliases.map(alias => parseCommand(alias).cmd);\n            let isDefault = false;\n            const parsedAliases = [parsedCommand.cmd].concat(aliases).filter(c => {\n                if (DEFAULT_MARKER.test(c)) {\n                    isDefault = true;\n                    return false;\n                }\n                return true;\n            });\n            if (parsedAliases.length === 0 && isDefault)\n                parsedAliases.push('$0');\n            if (isDefault) {\n                parsedCommand.cmd = parsedAliases[0];\n                aliases = parsedAliases.slice(1);\n                cmd = cmd.replace(DEFAULT_MARKER, parsedCommand.cmd);\n            }\n            aliases.forEach(alias => {\n                aliasMap[alias] = parsedCommand.cmd;\n            });\n            if (description !== false) {\n                usage.command(cmd, description, isDefault, aliases, deprecated);\n            }\n            handlers[parsedCommand.cmd] = {\n                original: cmd,\n                description,\n                handler,\n                builder: builder || {},\n                middlewares,\n                deprecated,\n                demanded: parsedCommand.demanded,\n                optional: parsedCommand.optional,\n            };\n            if (isDefault)\n                defaultCommand = handlers[parsedCommand.cmd];\n        }\n    };\n    self.addDirectory = function addDirectory(dir, context, req, callerFile, opts) {\n        opts = opts || {};\n        if (typeof opts.recurse !== 'boolean')\n            opts.recurse = false;\n        if (!Array.isArray(opts.extensions))\n            opts.extensions = ['js'];\n        const parentVisit = typeof opts.visit === 'function' ? opts.visit : (o) => o;\n        opts.visit = function visit(obj, joined, filename) {\n            const visited = parentVisit(obj, joined, filename);\n            if (visited) {\n                if (~context.files.indexOf(joined))\n                    return visited;\n                context.files.push(joined);\n                self.addHandler(visited);\n            }\n            return visited;\n        };\n        shim.requireDirectory({ require: req, filename: callerFile }, dir, opts);\n    };\n    function moduleName(obj) {\n        const mod = whichModule(obj);\n        if (!mod)\n            throw new Error(`No command name given for module: ${shim.inspect(obj)}`);\n        return commandFromFilename(mod.filename);\n    }\n    function commandFromFilename(filename) {\n        return shim.path.basename(filename, shim.path.extname(filename));\n    }\n    function extractDesc({ describe, description, desc, }) {\n        for (const test of [describe, description, desc]) {\n            if (typeof test === 'string' || test === false)\n                return test;\n            assertNotStrictEqual(test, true, shim);\n        }\n        return false;\n    }\n    self.getCommands = () => Object.keys(handlers).concat(Object.keys(aliasMap));\n    self.getCommandHandlers = () => handlers;\n    self.hasDefaultCommand = () => !!defaultCommand;\n    self.runCommand = function runCommand(command, yargs, parsed, commandIndex) {\n        let aliases = parsed.aliases;\n        const commandHandler = handlers[command] || handlers[aliasMap[command]] || defaultCommand;\n        const currentContext = yargs.getContext();\n        let numFiles = currentContext.files.length;\n        const parentCommands = currentContext.commands.slice();\n        let innerArgv = parsed.argv;\n        let positionalMap = {};\n        if (command) {\n            currentContext.commands.push(command);\n            currentContext.fullCommands.push(commandHandler.original);\n        }\n        const builder = commandHandler.builder;\n        if (isCommandBuilderCallback(builder)) {\n            const builderOutput = builder(yargs.reset(parsed.aliases));\n            const innerYargs = isYargsInstance(builderOutput) ? builderOutput : yargs;\n            if (shouldUpdateUsage(innerYargs)) {\n                innerYargs\n                    .getUsageInstance()\n                    .usage(usageFromParentCommandsCommandHandler(parentCommands, commandHandler), commandHandler.description);\n            }\n            innerArgv = innerYargs._parseArgs(null, null, true, commandIndex);\n            aliases = innerYargs.parsed.aliases;\n        }\n        else if (isCommandBuilderOptionDefinitions(builder)) {\n            const innerYargs = yargs.reset(parsed.aliases);\n            if (shouldUpdateUsage(innerYargs)) {\n                innerYargs\n                    .getUsageInstance()\n                    .usage(usageFromParentCommandsCommandHandler(parentCommands, commandHandler), commandHandler.description);\n            }\n            Object.keys(commandHandler.builder).forEach(key => {\n                innerYargs.option(key, builder[key]);\n            });\n            innerArgv = innerYargs._parseArgs(null, null, true, commandIndex);\n            aliases = innerYargs.parsed.aliases;\n        }\n        if (!yargs._hasOutput()) {\n            positionalMap = populatePositionals(commandHandler, innerArgv, currentContext);\n        }\n        const middlewares = globalMiddleware\n            .slice(0)\n            .concat(commandHandler.middlewares);\n        applyMiddleware(innerArgv, yargs, middlewares, true);\n        if (!yargs._hasOutput()) {\n            yargs._runValidation(innerArgv, aliases, positionalMap, yargs.parsed.error, !command);\n        }\n        if (commandHandler.handler && !yargs._hasOutput()) {\n            yargs._setHasOutput();\n            const populateDoubleDash = !!yargs.getOptions().configuration['populate--'];\n            yargs._postProcess(innerArgv, populateDoubleDash);\n            innerArgv = applyMiddleware(innerArgv, yargs, middlewares, false);\n            let handlerResult;\n            if (isPromise(innerArgv)) {\n                handlerResult = innerArgv.then(argv => commandHandler.handler(argv));\n            }\n            else {\n                handlerResult = commandHandler.handler(innerArgv);\n            }\n            const handlerFinishCommand = yargs.getHandlerFinishCommand();\n            if (isPromise(handlerResult)) {\n                yargs.getUsageInstance().cacheHelpMessage();\n                handlerResult\n                    .then(value => {\n                    if (handlerFinishCommand) {\n                        handlerFinishCommand(value);\n                    }\n                })\n                    .catch(error => {\n                    try {\n                        yargs.getUsageInstance().fail(null, error);\n                    }\n                    catch (err) {\n                    }\n                })\n                    .then(() => {\n                    yargs.getUsageInstance().clearCachedHelpMessage();\n                });\n            }\n            else {\n                if (handlerFinishCommand) {\n                    handlerFinishCommand(handlerResult);\n                }\n            }\n        }\n        if (command) {\n            currentContext.commands.pop();\n            currentContext.fullCommands.pop();\n        }\n        numFiles = currentContext.files.length - numFiles;\n        if (numFiles > 0)\n            currentContext.files.splice(numFiles * -1, numFiles);\n        return innerArgv;\n    };\n    function shouldUpdateUsage(yargs) {\n        return (!yargs.getUsageInstance().getUsageDisabled() &&\n            yargs.getUsageInstance().getUsage().length === 0);\n    }\n    function usageFromParentCommandsCommandHandler(parentCommands, commandHandler) {\n        const c = DEFAULT_MARKER.test(commandHandler.original)\n            ? commandHandler.original.replace(DEFAULT_MARKER, '').trim()\n            : commandHandler.original;\n        const pc = parentCommands.filter(c => {\n            return !DEFAULT_MARKER.test(c);\n        });\n        pc.push(c);\n        return `$0 ${pc.join(' ')}`;\n    }\n    self.runDefaultBuilderOn = function (yargs) {\n        assertNotStrictEqual(defaultCommand, undefined, shim);\n        if (shouldUpdateUsage(yargs)) {\n            const commandString = DEFAULT_MARKER.test(defaultCommand.original)\n                ? defaultCommand.original\n                : defaultCommand.original.replace(/^[^[\\]<>]*/, '$0 ');\n            yargs.getUsageInstance().usage(commandString, defaultCommand.description);\n        }\n        const builder = defaultCommand.builder;\n        if (isCommandBuilderCallback(builder)) {\n            builder(yargs);\n        }\n        else if (!isCommandBuilderDefinition(builder)) {\n            Object.keys(builder).forEach(key => {\n                yargs.option(key, builder[key]);\n            });\n        }\n    };\n    function populatePositionals(commandHandler, argv, context) {\n        argv._ = argv._.slice(context.commands.length);\n        const demanded = commandHandler.demanded.slice(0);\n        const optional = commandHandler.optional.slice(0);\n        const positionalMap = {};\n        validation.positionalCount(demanded.length, argv._.length);\n        while (demanded.length) {\n            const demand = demanded.shift();\n            populatePositional(demand, argv, positionalMap);\n        }\n        while (optional.length) {\n            const maybe = optional.shift();\n            populatePositional(maybe, argv, positionalMap);\n        }\n        argv._ = context.commands.concat(argv._.map(a => '' + a));\n        postProcessPositionals(argv, positionalMap, self.cmdToParseOptions(commandHandler.original));\n        return positionalMap;\n    }\n    function populatePositional(positional, argv, positionalMap) {\n        const cmd = positional.cmd[0];\n        if (positional.variadic) {\n            positionalMap[cmd] = argv._.splice(0).map(String);\n        }\n        else {\n            if (argv._.length)\n                positionalMap[cmd] = [String(argv._.shift())];\n        }\n    }\n    function postProcessPositionals(argv, positionalMap, parseOptions) {\n        const options = Object.assign({}, yargs.getOptions());\n        options.default = Object.assign(parseOptions.default, options.default);\n        for (const key of Object.keys(parseOptions.alias)) {\n            options.alias[key] = (options.alias[key] || []).concat(parseOptions.alias[key]);\n        }\n        options.array = options.array.concat(parseOptions.array);\n        options.config = {};\n        const unparsed = [];\n        Object.keys(positionalMap).forEach(key => {\n            positionalMap[key].map(value => {\n                if (options.configuration['unknown-options-as-args'])\n                    options.key[key] = true;\n                unparsed.push(`--${key}`);\n                unparsed.push(value);\n            });\n        });\n        if (!unparsed.length)\n            return;\n        const config = Object.assign({}, options.configuration, {\n            'populate--': true,\n        });\n        const parsed = shim.Parser.detailed(unparsed, Object.assign({}, options, {\n            configuration: config,\n        }));\n        if (parsed.error) {\n            yargs.getUsageInstance().fail(parsed.error.message, parsed.error);\n        }\n        else {\n            const positionalKeys = Object.keys(positionalMap);\n            Object.keys(positionalMap).forEach(key => {\n                positionalKeys.push(...parsed.aliases[key]);\n            });\n            Object.keys(parsed.argv).forEach(key => {\n                if (positionalKeys.indexOf(key) !== -1) {\n                    if (!positionalMap[key])\n                        positionalMap[key] = parsed.argv[key];\n                    argv[key] = parsed.argv[key];\n                }\n            });\n        }\n    }\n    self.cmdToParseOptions = function (cmdString) {\n        const parseOptions = {\n            array: [],\n            default: {},\n            alias: {},\n            demand: {},\n        };\n        const parsed = parseCommand(cmdString);\n        parsed.demanded.forEach(d => {\n            const [cmd, ...aliases] = d.cmd;\n            if (d.variadic) {\n                parseOptions.array.push(cmd);\n                parseOptions.default[cmd] = [];\n            }\n            parseOptions.alias[cmd] = aliases;\n            parseOptions.demand[cmd] = true;\n        });\n        parsed.optional.forEach(o => {\n            const [cmd, ...aliases] = o.cmd;\n            if (o.variadic) {\n                parseOptions.array.push(cmd);\n                parseOptions.default[cmd] = [];\n            }\n            parseOptions.alias[cmd] = aliases;\n        });\n        return parseOptions;\n    };\n    self.reset = () => {\n        handlers = {};\n        aliasMap = {};\n        defaultCommand = undefined;\n        return self;\n    };\n    const frozens = [];\n    self.freeze = () => {\n        frozens.push({\n            handlers,\n            aliasMap,\n            defaultCommand,\n        });\n    };\n    self.unfreeze = () => {\n        const frozen = frozens.pop();\n        assertNotStrictEqual(frozen, undefined, shim);\n        ({ handlers, aliasMap, defaultCommand } = frozen);\n    };\n    return self;\n}\nexport function isCommandBuilderDefinition(builder) {\n    return (typeof builder === 'object' &&\n        !!builder.builder &&\n        typeof builder.handler === 'function');\n}\nfunction isCommandAndAliases(cmd) {\n    if (cmd.every(c => typeof c === 'string')) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function isCommandBuilderCallback(builder) {\n    return typeof builder === 'function';\n}\nfunction isCommandBuilderOptionDefinitions(builder) {\n    return typeof builder === 'object';\n}\nexport function isCommandHandlerDefinition(cmd) {\n    return typeof cmd === 'object' && !Array.isArray(cmd);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}